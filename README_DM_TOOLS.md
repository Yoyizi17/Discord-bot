# 📨 Discord私信工具集

两个强大的工具帮你管理和分析Discord私信数据。

## 🎯 工具概述

### 1. 📊 Discord数据分析工具 (`discord_data_analyzer.py`)
**推荐使用** - 分析Discord官方数据导出包，获取完整私信列表。

### 2. 🔐 Discord OAuth2授权工具 (`discord_dm_oauth.py`)  
演示OAuth2授权流程（由于API限制，功能有限）。

---

## 🏆 推荐方案：数据分析工具

### ✨ 功能特色
- 📋 **完整私信列表** - 分析所有私信用户和群聊
- 📊 **详细统计** - 消息数量、时间范围、活跃度分析
- 📈 **多格式导出** - CSV、JSON、HTML报告
- 🎨 **可视化报告** - 自动生成精美HTML报告
- 🔍 **智能分析** - 自动识别私信和群聊

### 🚀 使用步骤

#### 第1步：获取Discord数据包
1. **打开Discord** → 设置 ⚙️
2. **隐私与安全** → **申请我的数据**
3. **等待邮件通知**（通常1-3天）
4. **下载ZIP数据包**

#### 第2步：运行分析工具
```bash
# 安装依赖（如果需要图形界面）
pip install tkinter

# 运行工具
python discord_data_analyzer.py
```

#### 第3步：选择数据包
- 支持ZIP文件直接分析
- 支持解压后的文件夹
- 自动识别messages文件夹

#### 第4步：查看结果
- 控制台显示统计信息
- 自动生成多种格式报告
- 浏览器自动打开HTML报告

### 📊 输出文件

#### CSV文件 (`discord_dm_users_YYYYMMDD_HHMMSS.csv`)
```
序号,用户名,显示名,用户ID,频道ID,类型,消息数量,首次消息时间,最后消息时间
1,张三,张三,123456789,987654321,私信,1520,2023-01-15T10:30:00,2025-08-15T15:45:00
2,李四,李四,234567890,876543210,私信,856,2023-03-20T14:20:00,2025-08-10T09:15:00
```

#### JSON文件 (`discord_dm_analysis_YYYYMMDD_HHMMSS.json`)
```json
{
  "analysis_time": "2025-08-15T16:30:00",
  "statistics": {
    "total_users": 45,
    "total_messages": 12580,
    "dm_users_count": 38,
    "group_chats_count": 7
  },
  "dm_users": [...]
}
```

#### HTML报告 (`discord_dm_report_YYYYMMDD_HHMMSS.html`)
- 精美的可视化报告
- 统计卡片展示
- 完整用户列表表格
- 自动在浏览器中打开

### 📈 统计信息包括

- 👥 **总用户数** - 包含私信和群聊
- 💬 **总消息数** - 所有对话的消息总数
- 📨 **私信用户数** - 一对一私信的用户数量
- 👨‍👩‍👧‍👦 **群聊数量** - 群组对话数量
- 📊 **平均消息数** - 每个对话的平均消息数
- 🏆 **活跃用户排行** - 按消息数量排序的前10名
- 📅 **时间分析** - 首次和最后消息时间

---

## 🔐 备选方案：OAuth2授权工具

### ⚠️ 重要说明
由于Discord API政策限制，普通OAuth2应用**无法直接访问用户私信**。
此工具主要用于：
- 演示OAuth2授权流程
- 学习Discord API使用
- 作为其他功能的基础

### 🛠️ 配置步骤

#### 第1步：创建Discord应用
1. 访问 [Discord开发者门户](https://discord.com/developers/applications)
2. 创建新应用程序
3. 获取Client ID和Client Secret
4. 设置重定向URI：`http://localhost:8080/callback`

#### 第2步：配置脚本
```python
CLIENT_ID = "你的客户端ID"
CLIENT_SECRET = "你的客户端密钥"
```

#### 第3步：安装依赖并运行
```bash
# 安装依赖
pip install -r oauth_requirements.txt

# 运行工具
python discord_dm_oauth.py
```

#### 第4步：Web界面
- 自动打开 http://localhost:8080
- 按提示完成OAuth2授权流程

---

## 🆚 工具对比

| 特性 | 数据分析工具 | OAuth2工具 |
|------|-------------|-----------|
| **获取完整私信列表** | ✅ 完整 | ❌ 受限 |
| **使用难度** | 🟢 简单 | 🟡 中等 |
| **需要配置** | ❌ 无需 | ✅ 需要 |
| **数据完整性** | 🟢 100% | 🔴 很少 |
| **实时性** | 🟡 需要重新导出 | 🟢 实时 |
| **推荐程度** | ⭐⭐⭐⭐⭐ | ⭐⭐ |

## 💡 使用建议

### 🎯 **推荐使用数据分析工具**
- 功能完整，无需复杂配置
- 获取100%完整的私信数据
- 支持历史数据分析
- 多种导出格式

### 📋 **数据导出技巧**
1. **定期申请数据** - 建议每月申请一次以获取最新数据
2. **保存历史数据** - 可以对比不同时期的私信活跃度
3. **隐私保护** - 导出的数据包含敏感信息，注意保护

### 🔒 **隐私和安全**
- 所有工具都在本地运行
- 不上传任何数据到外部服务器
- 导出的文件请妥善保管
- 可以随时删除生成的报告文件

## 🎉 使用场景

- **👥 联系人管理** - 整理Discord私信联系人
- **📊 社交分析** - 分析自己的社交活跃度
- **🔍 查找用户** - 快速找到特定的私信用户
- **📈 数据统计** - 了解自己的Discord使用习惯
- **💾 数据备份** - 备份重要的私信联系人信息

---

## 🚀 快速开始

### 最简单的使用方法：

1. **申请Discord数据导出**（设置 → 隐私与安全 → 申请我的数据）
2. **下载数据包**（等待邮件通知）
3. **运行分析工具**：
   ```bash
   python discord_data_analyzer.py
   ```
4. **选择下载的ZIP文件**
5. **查看生成的HTML报告** 🎉

就这么简单！几分钟内就能获得完整的Discord私信用户列表和详细分析报告。

## 📞 技术支持

如果遇到问题：
1. 检查数据包格式是否正确
2. 确保Python环境正常
3. 查看控制台错误信息
4. 尝试使用解压后的文件夹而不是ZIP文件

**推荐使用数据分析工具获得最佳体验！** 📨✨
